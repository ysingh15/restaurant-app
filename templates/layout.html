  <!doctype html>
  <html lang="en" data-theme="dark">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Singh's Kitchen</title>

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">

    <!-- Apply saved theme ASAP (prevents flash) -->
    <script>
      (function () {
        const saved = localStorage.getItem("theme") || "dark";
        document.documentElement.setAttribute("data-theme", saved);
      })();
    </script>
  </head>

  <body class="container py-4">

    <!-- NAVBAR -->
    <nav class="topbar d-flex align-items-center gap-2 flex-wrap mb-4">

      <!-- Brand (logo + name) -->
      <div class="brand-badge">
        <!-- Put your logo file in: static/images/logo.png -->
        <img
          src="{{ url_for('static', filename='images/logo.png') }}"
          alt="Singh's Kitchen"
          style="height: 34px; width: 34px; border-radius: 10px; object-fit: cover;"
          onerror="this.style.display='none';"
        >
        <span>Singh's Kitchen</span>
      </div>

      <a href="/" class="nav-linkish ms-2">Home</a>
      <a href="/menu" class="nav-linkish">Menu</a>
      <a href="/cart" class="nav-linkish">Cart</a>
      <a href="/orders" class="nav-linkish">Orders</a>

      {% if session.get("role") == "admin" %}
        <a href="/admin/menu" class="nav-linkish">Admin</a>
      {% endif %}

      <!-- THEME TOGGLE -->
      <button id="themeToggle" class="theme-btn ms-auto" type="button">
        ‚òÄÔ∏è Light
      </button>

      <span>
        {% if session.get("user_id") %}
          <span class="text-white-50">{{ session.get("email") }} ({{ session.get("role") }})</span>
          <span class="mx-2 text-white-50">|</span>
          <a href="/logout" class="nav-linkish">Logout</a>
        {% else %}
          <a href="/login" class="nav-linkish">Login</a>
          <span class="mx-2 text-white-50">|</span>
          <a href="/register" class="nav-linkish">Register</a>
        {% endif %}
      </span>
    </nav>

<body class="container py-4">

  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <div class="mb-3">
        {% for message in messages %}
          <div class="alert alert-success alert-dismissible fade show" role="alert">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}

  {% block content %}{% endblock %}
</body>


    <!-- PAGE CONTENT -->
    <main>
      {% block content %}{% endblock %}
    </main>

    <!-- THEME TOGGLE SCRIPT -->
    <script>
      const root = document.documentElement;
      const btn = document.getElementById("themeToggle");

      function syncButton() {
        const theme = root.getAttribute("data-theme") || "dark";
        btn.textContent = theme === "dark" ? "‚òÄÔ∏è Light" : "üåô Dark";
      }

      syncButton();

      btn.addEventListener("click", () => {
        const current = root.getAttribute("data-theme") || "dark";
        const next = current === "dark" ? "light" : "dark";
        root.setAttribute("data-theme", next);
        localStorage.setItem("theme", next);
        syncButton();
      });
    </script>

  </body>
  </html>
